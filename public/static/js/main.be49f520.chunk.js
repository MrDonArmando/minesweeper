(this.webpackJsonpsaper=this.webpackJsonpsaper||[]).push([[0],{23:function(e,t,n){e.exports=n(40)},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(11),o=n.n(i),c=(n(28),n(2)),l=(n(29),n(3)),s=(n(30),n(31),"#232124"),u="#323134",m={1:"#ffe082",2:"#ffb74d",3:"#c75b39",4:"#c41c00",5:"#b91400",6:"#ac0800",7:"#9f0000",8:"#870000"},d=function(e){var t=e.index,n=e.isMined,a=e.isClicked,i=e.handleClick,o=e.numberOfMinedAdjacentCells;return r.a.createElement("button",{disabled:a,className:"cell",style:{backgroundColor:a?u:s,color:n?"white":m[o]},onClick:function(){return i(t)}},!n&&a&&0!==o&&o,n&&a&&"X")},b=n(7),f={height:20,width:20,numberOfBombs:40,isFetching:!1},E={token:void 0,isTryingToLogin:!1,loginError:void 0,isTryingToRegister:!1,registerError:void 0},g=n(6),p=n(21),O=Object(b.c)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARD_HEIGHT":return Object(l.a)({},e,{height:t.payload.height});case"SET_BOARD_WIDTH":return Object(l.a)({},e,{width:t.payload.width});case"SET_NUMBER_OF_BOMBS":return Object(l.a)({},e,{numberOfBombs:t.payload.numberOfBombs});case"START_OF_REQUEST":return Object(l.a)({},e,{isFetching:!0});case"END_OF_REQUEST":return Object(l.a)({},e,{isFetching:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGIN_START":return Object(l.a)({},e,{isTryingToLogin:!0});case"SET_LOGIN_SUCCESS":return Object(l.a)({},e,{isTryingToLogin:!1,token:t.payload.token});case"SET_LOGIN_ERROR":return Object(l.a)({},e,{isTryingToLogin:!1,loginError:t.payload.error});case"SET_REGISTER_START":return Object(l.a)({},e,{isTryingToRegister:!0});case"SET_REGISTER_SUCCESS":return Object(l.a)({},e,{isTryingToRegister:!1});case"SET_REGISTER_ERROR":return Object(l.a)({},e,{registerError:t.payload.error});default:return e}}}),h=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,S=Object(b.e)(O,h(Object(b.a)(p.a))),R=g.c,T=S,v=n(42),j=function(e,t,n,a){e.forEach((function(e){var r=function(e,t,n){return{isCellFromFirstRow:e+1<=n,isCellFromLastRow:e+1>n*t-n,isCellFromFirstColumn:(e+1)%n===1,isCellFromLastColumn:(e+1)%n===0}}(e,t,n),i=r.isCellFromFirstRow,o=r.isCellFromFirstColumn,c=r.isCellFromLastColumn,l=r.isCellFromLastRow;a(e,i&&o?[e+1,e+n,e+n+1]:i&&c?[e-1,e+n,e+n-1]:l&&o?[e+1,e-n,e-n+1]:l&&c?[e-1,e-n,e-n-1]:i?[e-1,e+1,e+n,e+n+1,e+n-1]:l?[e-1,e+1,e-n,e-n-1,e-n+1]:o?[e+1,e-n,e-n+1,e+n,e+n+1]:c?[e-1,e-n,e-n-1,e+n,e+n-1]:[e-1,e+1,e-n,e-n-1,e-n+1,e+n,e+n-1,e+n+1])}))},C=function(e,t,n){var a=function(e,t){for(var n=[];n.length<e;){var a=Math.floor(Math.random()*t.length);n.includes(a)||n.push(a)}return n.forEach((function(e){t[e].isMined=!0})),{cells:t,indexesOfMinedCells:n}}(e,function(e){return Array.from({length:e}).map((function(e,t){return{isMined:!1,isClicked:!1,numberOfMinedAdjacentCells:0,indexesOfAdjacentCells:[],id:Object(v.a)()}}))}(t*n)),r=a.cells,i=a.indexesOfMinedCells;return j(i,t,n,(function(e,t){t.forEach((function(e){r[e].numberOfMinedAdjacentCells++}))})),j(r.map((function(e,t){return t})),t,n,(function(e,t){r[e].indexesOfAdjacentCells=t})),r};var y=function(e){var t=e.isGameReseted,n=e.setIsGameReseted,i=R((function(e){return e.board.width})),o=R((function(e){return e.board.height})),s=R((function(e){return e.board.numberOfBombs})),u=Object(a.useState)((function(){return C(s,o,i)})),m=Object(c.a)(u,2),b=m[0],f=m[1],E=Object(a.useState)(!1),g=Object(c.a)(E,2),p=(g[0],g[1]);Object(a.useEffect)((function(){t&&(f(C(s,o,i)),n(!1))}),[t]),Object(a.useEffect)((function(){f(C(s,o,i))}),[s,i,o]);var O={width:"".concat(40*i+2,"px"),height:"".concat(40*o+2,"px")},h=function(e){var t=b[e];if(t.isMined)return p(!0),void f((function(e){return e.map((function(e){return Object(l.a)({},e,{isClicked:!0})}))}));var n=b.map((function(e){return Object(l.a)({},e)}));n[e].isClicked=!0,0===t.numberOfMinedAdjacentCells&&function e(t,n){n.forEach((function(n){var a=t[n];a.isClicked||(a.isClicked=!0,0===a.numberOfMinedAdjacentCells&&e(t,a.indexesOfAdjacentCells))}))}(n,t.indexesOfAdjacentCells),f(n)};return r.a.createElement("div",{id:"container-board"},r.a.createElement("div",{id:"board",style:O},b.map((function(e,t){var n=e.isMined,a=e.isClicked,i=e.numberOfMinedAdjacentCells,o=e.id;return r.a.createElement(d,{key:o,index:t,isMined:n,isClicked:a,numberOfMinedAdjacentCells:i,handleClick:h})}))))},_=(n(36),function(e){return{type:"SET_BOARD_WIDTH",payload:{width:e}}}),w=function(e){return{type:"SET_BOARD_HEIGHT",payload:{height:e}}},N=function(e){return{type:"SET_NUMBER_OF_BOMBS",payload:{numberOfBombs:e}}},I=function(e){var t=e.setIsGameReseted,n=Object(g.b)(),i=R((function(e){return e.board.isFetching})),o=R((function(e){return e.board.width})),l=R((function(e){return e.board.height})),s=R((function(e){return e.board.numberOfBombs})),u=Object(a.useState)(o),m=Object(c.a)(u,2),d=m[0],b=m[1],f=Object(a.useState)(l),E=Object(c.a)(f,2),p=E[0],O=E[1],h=Object(a.useState)(s),S=Object(c.a)(h,2),T=S[0],v=S[1],j=Object(a.useState)(!0),C=Object(c.a)(j,2),y=C[0],I=C[1],k={width:y?"400px":"80px"};return r.a.createElement("div",{className:"menu-container",style:k},r.a.createElement("div",{id:"section-menu-container"},r.a.createElement("button",{className:"hamburger-button",onClick:function(){return I((function(e){return!e}))}},r.a.createElement("span",{className:"hamburger-line"}),r.a.createElement("span",{className:"hamburger-line"}),r.a.createElement("span",{className:"hamburger-line"})),y&&r.a.createElement("button",{id:"button-reset",onClick:function(){return t(!0)}},"Reset")),y&&r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:"section-menu-container",onSubmit:function(e){var t,a,r;e.preventDefault(),n((t=d,a=p,r=T,function(e,n){e({type:"START_OF_REQUEST"});var i=n();fetch("/user/settings",{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(i.user.token)},body:JSON.stringify({width:t,height:a,numberOfBombs:r})}).then((function(e){return e.json()})).then((function(t){var n=t.boardSettings,a=n.width,r=n.height,i=n.numberOfBombs;e(_(a)),e(w(r)),e(N(i))})).catch((function(e){return console.log("ERROR: ",e)})).finally((function(){return e({type:"END_OF_REQUEST"})}))}))}},r.a.createElement("div",{className:"container-connect"},r.a.createElement("label",{className:"board-size-label",htmlFor:"input-board-width"},"WIDTH"),r.a.createElement("input",{id:"input-board-width",type:"number",className:"board-size-input",step:1,min:4,max:20,value:d,onChange:function(e){return b(parseInt(e.target.value))}})),r.a.createElement("div",{className:"container-connect"},r.a.createElement("label",{className:"board-size-label"},"HEIGHT"),r.a.createElement("input",{type:"number",className:"board-size-input",step:1,min:4,max:20,value:p,onChange:function(e){return O(parseInt(e.target.value))}})),r.a.createElement("div",{className:"container-connect"},r.a.createElement("label",{className:"number-of-bombs-label"},"NUMBER OF BOMBS"),r.a.createElement("input",{type:"number",className:"number-of-bombs-input",step:1,min:1,max:d*p,value:T,onChange:function(e){return v(parseInt(e.target.value))}})),r.a.createElement("button",{type:"submit",id:"button-submit-board-settings"},"Submit ",i&&"..."))))};var k=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],i=t[1];return r.a.createElement("div",{id:"container-main"},r.a.createElement(y,{isGameReseted:n,setIsGameReseted:i}),r.a.createElement(I,{setIsGameReseted:i}))},M=(n(37),(0,n(5).createBrowserHistory)()),A=function(e){return{type:"SET_LOGIN_ERROR",payload:{error:e}}},B=function(e){return{type:"SET_REGISTER_ERROR",payload:{error:e}}},F=n(9),G=function(){var e=Object(g.b)(),t=R((function(e){return e.user.loginError})),n=Object(a.useState)(""),i=Object(c.a)(n,2),o=i[0],l=i[1],s=Object(a.useState)(""),u=Object(c.a)(s,2),m=u[0],d=u[1];return r.a.createElement("div",{id:"container-login"},r.a.createElement("form",{id:"login-form",onSubmit:function(t){t.preventDefault(),e(function(e,t){return function(n){n({type:"SET_LOGIN_START"}),fetch("/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(e.error)return n(A(e.error));console.log("LOGIN DATA: ",e);var t=e.token,a=e.boardSettings,r=a.width,i=a.height,o=a.numberOfBombs;localStorage.setItem("minesweeper_token",t),n(function(e){return{type:"SET_LOGIN_SUCCESS",payload:{token:e}}}(t)),n(_(r)),n(w(i)),n(N(o)),M.push("/game")})).catch((function(e){console.log("ERROR: ",e),n(A(e))}))}}(o,m))}},r.a.createElement("fieldset",{id:"login-fieldset"},r.a.createElement("legend",{id:"login-legend"}," Minesweeper"),r.a.createElement("label",{className:"login-label"},"Email",r.a.createElement("input",{type:"email",name:"email",value:o,onChange:function(e){return l(e.target.value)},className:"login-input"})),r.a.createElement("label",{className:"login-label"},"Password",r.a.createElement("input",{type:"password",name:"password",value:m,onChange:function(e){return d(e.target.value)},className:"login-input"})),t&&r.a.createElement("span",{id:"login-error"},t),r.a.createElement("button",{className:"button-submit-login"},"Login")),r.a.createElement(F.a,{to:"/register",id:"register-link"},"Register here")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=n(1),L=n(22),D=function(e){var t=e.component,n=Object(L.a)(e,["component"]);return r.a.createElement(x.b,Object.assign({},n,{render:function(e){return localStorage.getItem("minesweeper_token")?r.a.createElement(t,e):r.a.createElement(x.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=(n(39),function(){var e=Object(g.b)(),t=R((function(e){return e.user.registerError})),n=Object(a.useState)(""),i=Object(c.a)(n,2),o=i[0],l=i[1],s=Object(a.useState)(""),u=Object(c.a)(s,2),m=u[0],d=u[1],b=Object(a.useState)(""),f=Object(c.a)(b,2),E=f[0],p=f[1];return r.a.createElement("div",{id:"container-register"},r.a.createElement("form",{id:"register-form",onSubmit:function(t){t.preventDefault(),e(function(e,t,n){return function(a){a({type:"SET_REGISTER_START"}),fetch("/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,passwordConfirmation:n})}).then((function(e){return e.json()})).then((function(e){if(e.error)return console.log("ERROR: ",e.error),void a(B(e.error));console.log("REGISTER DATA: ",e),a({type:"SET_REGISTER_SUCCESS"}),M.push("/")})).catch((function(e){console.log("ERROR: ",e),a(B(e))}))}}(o,m,E))}},r.a.createElement("fieldset",{id:"register-fieldset"},r.a.createElement("legend",{id:"register-legend"}," Minesweeper"),r.a.createElement("label",{className:"register-label"},"Email",r.a.createElement("input",{value:o,onChange:function(e){return l(e.target.value)},className:"register-input"})),r.a.createElement("label",{className:"register-label"},"Password",r.a.createElement("input",{value:m,onChange:function(e){return d(e.target.value)},type:"password",className:"register-input"})),r.a.createElement("label",{className:"register-label"},"Confirm password",r.a.createElement("input",{value:E,onChange:function(e){return p(e.target.value)},type:"password",className:"register-input"})),t&&r.a.createElement("span",{id:"register-error"},t),r.a.createElement("button",{className:"button-submit-register"},"Register")),r.a.createElement(F.a,{to:"/",id:"login-link"},"Login here")))});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g.a,{store:T},r.a.createElement(x.c,{history:M},r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/",exact:!0},r.a.createElement(G,null)),r.a.createElement(x.b,{path:"/register",exact:!0},r.a.createElement(U,null)),r.a.createElement(D,{path:"/game",exact:!0},r.a.createElement(k,null)))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.be49f520.chunk.js.map